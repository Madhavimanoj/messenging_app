{"ast":null,"code":"import{useEffect,useRef}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChatWindow=_ref=>{var _chat$messages;let{chat,typing}=_ref;const scrollRef=useRef(null);useEffect(()=>{var _scrollRef$current;(_scrollRef$current=scrollRef.current)===null||_scrollRef$current===void 0?void 0:_scrollRef$current.scrollIntoView({behavior:\"smooth\"});},[chat.messages]);const formatTime=isoTime=>{const rawTime=(isoTime===null||isoTime===void 0?void 0:isoTime.$date)||isoTime;const time=new Date(rawTime);return isNaN(time.getTime())?\"Invalid Date\":time.toLocaleTimeString([],{hour:\"2-digit\",minute:\"2-digit\"});};return/*#__PURE__*/_jsxs(_Fragment,{children:[chat===null||chat===void 0?void 0:(_chat$messages=chat.messages)===null||_chat$messages===void 0?void 0:_chat$messages.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"message-bubble \".concat(msg.direction===\"outgoing\"?\"you\":\"other\"),children:[/*#__PURE__*/_jsx(\"div\",{children:msg.message}),/*#__PURE__*/_jsx(\"div\",{className:\"timestamp\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"meta\",children:[formatTime(msg.timestamp),\" \",/*#__PURE__*/_jsx(\"span\",{style:{color:msg.status===\"read\"?\"blue\":\"gray\"},children:msg.status})]})})]},index)),typing&&/*#__PURE__*/_jsx(\"div\",{className:\"typing-indicator\",children:/*#__PURE__*/_jsx(\"em\",{children:\"Typing...\"})}),/*#__PURE__*/_jsx(\"div\",{ref:scrollRef})]});};export default ChatWindow;","map":{"version":3,"names":["useEffect","useRef","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatWindow","_ref","_chat$messages","chat","typing","scrollRef","_scrollRef$current","current","scrollIntoView","behavior","messages","formatTime","isoTime","rawTime","$date","time","Date","isNaN","getTime","toLocaleTimeString","hour","minute","children","map","msg","index","className","concat","direction","message","timestamp","style","color","status","ref"],"sources":["C:/Users/madha/Whatsapp_Clone/client/src/components/ChatWindow.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\r\n\r\nconst ChatWindow = ({ chat, typing }) => {\r\n  const scrollRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [chat.messages]);\r\n\r\n  const formatTime = (isoTime) => {\r\n    const rawTime = isoTime?.$date || isoTime;\r\n    const time = new Date(rawTime);\r\n    return isNaN(time.getTime())\r\n      ? \"Invalid Date\"\r\n      : time.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {chat?.messages?.map((msg, index) => (\r\n        <div\r\n          key={index}\r\n          className={`message-bubble ${\r\n            msg.direction === \"outgoing\" ? \"you\" : \"other\"\r\n          }`}\r\n        >\r\n          <div>{msg.message}</div>\r\n          <div className=\"timestamp\">\r\n            <span className=\"meta\">\r\n              {formatTime(msg.timestamp)}{\" \"}\r\n              <span style={{ color: msg.status === \"read\" ? \"blue\" : \"gray\" }}>\r\n                {msg.status}\r\n              </span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      ))}\r\n\r\n      {typing && (\r\n        <div className=\"typing-indicator\">\r\n          <em>Typing...</em>\r\n        </div>\r\n      )}\r\n\r\n      <div ref={scrollRef} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChatWindow;"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1C,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAsB,KAAAC,cAAA,IAArB,CAAEC,IAAI,CAAEC,MAAO,CAAC,CAAAH,IAAA,CAClC,KAAM,CAAAI,SAAS,CAAGZ,MAAM,CAAC,IAAI,CAAC,CAE9BD,SAAS,CAAC,IAAM,KAAAc,kBAAA,CACd,CAAAA,kBAAA,CAAAD,SAAS,CAACE,OAAO,UAAAD,kBAAA,iBAAjBA,kBAAA,CAAmBE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAC3D,CAAC,CAAE,CAACN,IAAI,CAACO,QAAQ,CAAC,CAAC,CAEnB,KAAM,CAAAC,UAAU,CAAIC,OAAO,EAAK,CAC9B,KAAM,CAAAC,OAAO,CAAG,CAAAD,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEE,KAAK,GAAIF,OAAO,CACzC,KAAM,CAAAG,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACH,OAAO,CAAC,CAC9B,MAAO,CAAAI,KAAK,CAACF,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,CACxB,cAAc,CACdH,IAAI,CAACI,kBAAkB,CAAC,EAAE,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,MAAM,CAAE,SAAU,CAAC,CAAC,CACzE,CAAC,CAED,mBACExB,KAAA,CAAAE,SAAA,EAAAuB,QAAA,EACGnB,IAAI,SAAJA,IAAI,kBAAAD,cAAA,CAAJC,IAAI,CAAEO,QAAQ,UAAAR,cAAA,iBAAdA,cAAA,CAAgBqB,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,gBAC9B5B,KAAA,QAEE6B,SAAS,mBAAAC,MAAA,CACPH,GAAG,CAACI,SAAS,GAAK,UAAU,CAAG,KAAK,CAAG,OAAO,CAC7C,CAAAN,QAAA,eAEH3B,IAAA,QAAA2B,QAAA,CAAME,GAAG,CAACK,OAAO,CAAM,CAAC,cACxBlC,IAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAJ,QAAA,cACxBzB,KAAA,SAAM6B,SAAS,CAAC,MAAM,CAAAJ,QAAA,EACnBX,UAAU,CAACa,GAAG,CAACM,SAAS,CAAC,CAAE,GAAG,cAC/BnC,IAAA,SAAMoC,KAAK,CAAE,CAAEC,KAAK,CAAER,GAAG,CAACS,MAAM,GAAK,MAAM,CAAG,MAAM,CAAG,MAAO,CAAE,CAAAX,QAAA,CAC7DE,GAAG,CAACS,MAAM,CACP,CAAC,EACH,CAAC,CACJ,CAAC,GAbDR,KAcF,CACN,CAAC,CAEDrB,MAAM,eACLT,IAAA,QAAK+B,SAAS,CAAC,kBAAkB,CAAAJ,QAAA,cAC/B3B,IAAA,OAAA2B,QAAA,CAAI,WAAS,CAAI,CAAC,CACf,CACN,cAED3B,IAAA,QAAKuC,GAAG,CAAE7B,SAAU,CAAE,CAAC,EACvB,CAAC,CAEP,CAAC,CAED,cAAe,CAAAL,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}